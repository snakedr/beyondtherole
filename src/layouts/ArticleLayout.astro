---
import '../styles/global.css';
import HandwrittenNote from '../components/HandwrittenNote.astro';

interface Props {
	title: string;
	description: string;
	ogImage?: string;
}

const { title, description, ogImage } = Astro.props;
---

<!doctype html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{title}</title>
    <meta name="description" content={description}>
    <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
    <link rel="alternate icon" href="/favicon.ico" />
    <link rel="stylesheet" href="/styles/global.css">

    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="article">
    <meta property="og:url" content={Astro.url.origin + Astro.url.pathname}>
    <meta property="og:title" content={title}>
    <meta property="og:description" content={description}>
    {ogImage && <meta property="og:image" content={Astro.url.origin + ogImage}>}

    <!-- Twitter -->
    <meta property="twitter:card" content="summary_large_image">
    <meta property="twitter:url" content={Astro.url.origin + Astro.url.pathname}>
    <meta property="twitter:title" content={title}>
    <meta property="twitter:description" content={description}>
    {ogImage && <meta property="twitter:image" content={Astro.url.origin + ogImage}>}

</head>
<body>
    <HandwrittenNote />
    <button id="content-toggle-btn" class="fixed top-4 right-4 z-50 px-4 py-2 rounded-full bg-slate-100/80 backdrop-blur-sm shadow-lg border border-slate-200/80 text-sm font-medium text-slate-700 hover:bg-slate-200 transition-colors">
        <span id="toggle-text">Показать 'Think'</span>
    </button>
    
    <div>
        <slot />
    </div>

    <script src="/scripts/autotest.js" is:inline></script>
    <script>
        document.addEventListener('astro:page-load', () => {
            const toggleButton = document.getElementById('content-toggle-btn');
            const toggleText = document.getElementById('toggle-text');
            const contentWrapper = document.getElementById('content-wrapper');

            function updateButton(isThinkShown) {
                if (isThinkShown) {
                    contentWrapper.classList.add('show-think');
                    toggleText.textContent = "Скрыть 'Think'";
                } else {
                    contentWrapper.classList.remove('show-think');
                    toggleText.textContent = "Показать 'Think'";
                }
            }

            // Default to showing Lite content
            updateButton(false);

            toggleButton.addEventListener('click', () => {
                const isCurrentlyThink = contentWrapper.classList.contains('show-think');
                updateButton(!isCurrentlyThink);
            });
        });
    </script>
</body>
</html>